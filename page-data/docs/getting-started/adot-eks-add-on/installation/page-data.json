{
    "componentChunkName": "component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js",
    "path": "/docs/getting-started/adot-eks-add-on/installation",
    "result": {"data":{"mdx":{"id":"c46b625f-8ba8-5032-a731-1b976f53a122","excerpt":"The steps to fully deploy ADOT are: Meet the prerequisites described  here . Leverage EKS add-ons to deploy the ADOT Operator to your Amazon EKS cluster. Deployâ€¦","fields":{"slug":"/docs/getting-started/adot-eks-add-on/installation/"},"frontmatter":{"title":"Installation of AWS Distro for OpenTelemetry using EKS Add-Ons","description":"This page is about leveraging Amazon EKS add-ons to install ADOT.","image":null,"disableTableOfContents":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Installation of AWS Distro for OpenTelemetry using EKS Add-Ons\",\n  \"description\": \"This page is about leveraging Amazon EKS add-ons to install ADOT.\",\n  \"path\": \"/docs/getting-started/adot-eks-add-on/installation\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The steps to fully deploy ADOT are:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Meet the prerequisites described \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/docs/getting-started-adot-eks-add-on/requirements\"\n  }, \"here\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Leverage EKS add-ons to deploy the ADOT Operator to your Amazon EKS cluster.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Deploy the ADOT Collector Custom Resource Definition (CRD). You have the option to associate your IAM role with your EKS service account using \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.aws.amazon.com/emr/latest/EMR-on-EKS-DevelopmentGuide/setting-up-enable-IAM.html\"\n  }, \"IRSA\"), \". By doing this, your service account can then provide AWS permissions to the containers you run in any pod that use that service account.\")), mdx(\"h2\", {\n    \"id\": \"leverage-eks-add-ons-to-deploy-the-adot-operator-to-your-amazon-eks-cluster\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#leverage-eks-add-ons-to-deploy-the-adot-operator-to-your-amazon-eks-cluster\",\n    \"aria-label\": \"leverage eks add ons to deploy the adot operator to your amazon eks cluster permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Leverage EKS Add-Ons to deploy the ADOT Operator to your Amazon EKS cluster\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Apply the necessary permissions for ADOT to your cluster with the command:\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"kubectl apply -f https://amazon-eks.s3.amazonaws.com/docs/addons-otel-permissions.yaml\\n\")), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Install the ADOT Operator into your Amazon EKS cluster using the command:\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"aws eks create-addon --addon-name adot --cluster-name <your_cluster_name>\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"status\"), \" field value will be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CREATING\"), \" until complete.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"your_cluster_name\"), \" is the name of your cluster, you can find it by executing the command below, and a list of cluster names will appear:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"aws eks list-clusters --region <your_region>\\n\")), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Verify that ADOT is installed and running with the command:\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"aws eks describe-addon --addon-name adot --cluster-name <your_cluster_name>\\n\")), mdx(\"p\", null, \"You'll see \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"status\\\": \\\"ACTIVE\\\"\"), \" when creation is complete.\"), mdx(\"h3\", {\n    \"id\": \"deploy-the-adot-operator-to-your-amazon-eks-cluster-through-the-eks-console\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#deploy-the-adot-operator-to-your-amazon-eks-cluster-through-the-eks-console\",\n    \"aria-label\": \"deploy the adot operator to your amazon eks cluster through the eks console permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Deploy the ADOT Operator to your Amazon EKS cluster through the EKS console\"), mdx(\"p\", null, \"Follow these steps to use the EKS console to leverage EKS add-ons for deploying the ADOT Operator to your Amazon EKS cluster.\"), mdx(\"h4\", {\n    \"id\": \"eks-console-instructions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#eks-console-instructions\",\n    \"aria-label\": \"eks console instructions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"https://docs.aws.amazon.com/eks/latest/userguide/adot-manage.html#adot-install\"\n  }, \"EKS console instructions\")), mdx(\"h2\", {\n    \"id\": \"deploy-the-adot-collector\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#deploy-the-adot-collector\",\n    \"aria-label\": \"deploy the adot collector permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Deploy the ADOT Collector\"), mdx(\"p\", null, \"Once the ADOT EKS Add-On is running, you can deploy the ADOT Collector into your EKS cluster. The ADOT Collector can be deployed in one of four modes: Deployment, Daemonset, StatefulSet, and Sidecar. See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://aws-otel.github.io/docs/getting-started/operator#step-2-install-adot-collector-as-kubernetes-custom-resource-to-your-eks-cluster\"\n  }, \"this page\"), \" for more information on these deployment modes.\"), mdx(\"h3\", {\n    \"id\": \"use-your-iam-role-to-launch-the-adot-collector\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#use-your-iam-role-to-launch-the-adot-collector\",\n    \"aria-label\": \"use your iam role to launch the adot collector permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Use your IAM role to launch the ADOT Collector\"), mdx(\"p\", null, \"You can associate your IAM role to your EKS service account using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/emr/latest/EMR-on-EKS-DevelopmentGuide/setting-up-enable-IAM.html\"\n  }, \"IRSA\"), \". Your service account can then provide AWS permissions to the containers you run in any pod that use that service account. You must use this command for each cluster where you're installing ADOT to grant your AWS service account permissions.\\nFollow these steps to associate your IAM role to your EKS service account using IRSA:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create an IAM OIDC provider for your cluster by following the steps in the link below:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.aws.amazon.com/eks/latest/userguide/enable-iam-roles-for-service-accounts.html\"\n  }, \"Create an IAM OIDC provider for your cluster\")))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create your service account and IAM role. In this command, you must have values for the following flags:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"--name\"), \" flag, add the name of the service account you want to create; for this example we will name it \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"adot-collector\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"--namespace\"), \" flag, use the namespace your service account will reside in; for our example we will use the default namespace.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"--cluster\"), \" flag, use the name of your cluster.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The three \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"--attach-policy-arn\"), \" values are the policies to be attached. These three policies are the policies needed for each service we want to export to. If you only plan on using 1 or 2 of the services, you only need to attach the policies for that service:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"arn:aws:iam::aws:policy/AmazonPrometheusRemoteWriteAccess\"), \" grants write access to the Prometheus service.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess\"), \" grants write access to the AWS X-Ray service.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy\"), \" grants access to write the CloudWatch service.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"--override-existing-serviceaccounts\"), \" flag is for if you have a service account already created in the cluster without an IAM Role. You can exclude this if that is not the case.\")))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"eksctl create iamserviceaccount \\\\\\n    --name adot-collector \\\\\\n    --namespace default \\\\\\n    --cluster <your_cluster_name> \\\\\\n    --attach-policy-arn arn:aws:iam::aws:policy/AmazonPrometheusRemoteWriteAccess \\\\\\n    --attach-policy-arn arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess \\\\\\n    --attach-policy-arn arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy \\\\\\n    --approve \\\\\\n    --override-existing-serviceaccounts\\n\")), mdx(\"p\", null, \"We will see in our collector configurations in the next sections that we add the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"serviceAccount: adot-collector\"), \" field to our configuration to use IRSA.\"), mdx(\"h2\", {\n    \"id\": \"previous-topic-requirements\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#previous-topic-requirements\",\n    \"aria-label\": \"previous topic requirements permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"/docs/getting-started/adot-eks-add-on/requirements\"\n  }, \"Previous Topic: Requirements\")), mdx(\"h2\", {\n    \"id\": \"next-topic-collector-configuration-introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#next-topic-collector-configuration-introduction\",\n    \"aria-label\": \"next topic collector configuration introduction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"/docs/getting-started/adot-eks-add-on/config-intro\"\n  }, \"Next Topic: Collector configuration introduction\")));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"depth":2,"value":"Leverage EKS Add-Ons to deploy the ADOT Operator to your Amazon EKS cluster"},{"depth":3,"value":"Deploy the ADOT Operator to your Amazon EKS cluster through the EKS console"},{"depth":4,"value":"EKS console instructions"},{"depth":2,"value":"Deploy the ADOT Collector"},{"depth":3,"value":"Use your IAM role to launch the ADOT Collector"},{"depth":2,"value":"Previous Topic: Requirements"},{"depth":2,"value":"Next Topic: Collector configuration introduction"}]}},"pageContext":{"slug":"/docs/getting-started/adot-eks-add-on/installation/","repositoryEditUrl":"https://github.com/rocketseat/gatsby-themes/tree/main/examples/gatsby-theme-docs/src/docs/getting-started/adot-eks-add-on/installation.mdx","repositoryProvider":"GitHub"}},
    "staticQueryHashes": ["2501019404","973074209"]}